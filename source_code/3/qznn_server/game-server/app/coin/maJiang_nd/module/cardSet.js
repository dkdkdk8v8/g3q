/**
 * Created by Administrator on 2016/8/4.
 */

function WatchCard(arr) {
    var length = arr.length;
    for(var index = 0; index < length; index ++){
        var value = index + parseInt((length - index)*Math.random());

        var temp = arr[index];
        arr[index] = arr[value];
        arr[value] = temp;
    }
}

/**
 * 创建一副扑克牌
 * @param type
 */

var cardSet = function (type) {
    var data = [
        // 万
        0x0001, 0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
        0x0001, 0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
        0x0001, 0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
        0x0001, 0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
        // 条
        0x0101, 0x0102 ,0x0103, 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
        0x0101, 0x0102 ,0x0103, 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
        0x0101, 0x0102 ,0x0103, 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
        0x0101, 0x0102 ,0x0103, 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
        // 筒
        0x0201, 0x0202 ,0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
        0x0201, 0x0202 ,0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
        0x0201, 0x0202 ,0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
        0x0201, 0x0202 ,0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
        // 东南西北
        0x0301, 0x0302 ,0x0303, 0x0304,
        0x0301, 0x0302 ,0x0303, 0x0304,
        0x0301, 0x0302 ,0x0303, 0x0304,
        0x0301, 0x0302 ,0x0303, 0x0304,
        // 中发白
        0x0401, 0x0402 ,0x0403,
        0x0401, 0x0402 ,0x0403,
        0x0401, 0x0402 ,0x0403,
        0x0401, 0x0402 ,0x0403
    ];
    WatchCard(data);
    //作牌
    // var data = [
    //     // 万
    //     0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
    //     0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
    //     0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
    //     0x0001, 0x0002 ,0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0009,
    //     // 条
    //     0x0101, 0x0102 , 0x0104, 0x0105, 0x0106, 0x0107, 0x0109,
    //     0x0101, 0x0102 , 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
    //     0x0101, 0x0102 , 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
    //     0x0101, 0x0102 , 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109,
    //     // 筒
    //     0x0201, 0x0202 ,0x0203, 0x0206, 0x0207, 0x0208, 0x0209,
    //     0x0201, 0x0202 ,0x0203, 0x0205, 0x0206, 0x0208, 0x0209,
    //     0x0201, 0x0202 ,0x0203, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
    //     0x0201, 0x0202 ,0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209,
    //     // 东南西北
    //     0x0301, 0x0302 ,0x0303, 0x0304,
    //     0x0301, 0x0302 ,0x0303, 0x0304,
    //     0x0301, 0x0302 ,0x0303, 0x0304,
    //     0x0301, 0x0302 ,0x0303, 0x0304,
    //     // 中发白
    //     0x0401 ,0x0403,
    //     0x0401 ,0x0403,
    //     0x0401 ,0x0403,
    //     0x0401 ,0x0403,
    // ];

    // WatchCard(data);
    
    // var p2 = [0x0402, 0x0001, 0x0103, 0x0204];

    // var p1 = [0x0402, 0x0402, 0x0402, 0x0001, 0x0001, 0x0103, 0x0103, 0x0103,
    // 0x0204, 0x0204, 0x0108, 0x0205, 0x0207];

    // data = data.concat(p2).concat(p1);
    this.card = data;
};

module.exports = cardSet;

var handler = cardSet.prototype;

handler.getCard = function (num) {
    var resCard = [];
    if (num > this.card.length) {
        return resCard;
    }
    for (var i = 0; i < num; i++) {
        resCard.push(this.card.pop());
    }
    return resCard;
};
handler.insertCards = function (cards) {
    for(var i=0;i<cards.length;i++){
    this.card.splice(Math.floor(Math.random()*(this.card.length+1)),0,cards[i]);
    }

};

handler.getCardValue = function (index) {
    if (index && index < this.card.length) {
        return this.card[index];
    }
    else {
        return undefined;
    }
};

handler.getLeftCard = function() {
    return this.card.length;
};
