/**
 * Created by kudoo on 2018/5/23.
 */
//2018-05-22T08:15:00 +8小时
var assert = require('assert');
var gDef = module.exports;

gDef.data = [ 105,
    100,
    96,
    97,
    99,
    102,
    106,
    112,
    116,
    117,
    114,
    110,
    108,
    120,
    116,
    107,
    115,
    120,
    123,
    126,
    119,
    122,
    121,
    113,
    120,
    116,
    115,
    113,
    112,
    114,
    117,
    126,
    125,
    115,
    118,
    128,
    120,
    125,
    120,
    119,
    115,
    125,
    120,
    128,
    125,
    125,
    141,
    154,
    157,
    158,
    174,
    171,
    178,
    175,
    184,
    182,
    180,
    191,
    183,
    187,
    198,
    197,
    203,
    205,
    215,
    207,
    227,
    223,
    238,
    236,
    241,
    252,
    256,
    240,
    230,
    235,
    242,
    230,
    217,
    219,
    216,
    213,
    216,
    220,
    216,
    212,
    205,
    203,
    200,
    189,
    178,
    172,
    168,
    155,
    149,
    133,
    127,
    119,
    121,
    111,
    109,
    109,
    104,
    97,
    93,
    85,
    82,
    81,
    78,
    76,
    77,
    72,
    67,
    65,
    62,
    62,
    62,
    60,
    58,
    58,
    58,
    56,
    56,
    49,
    49,
    50,
    48,
    42,
    40,
    35,
    34,
    32,
    32,
    30,
    28,
    27,
    27,
    29,
    27,
    26,
    26,
    27,
    28,
    27,
    25,
    24,
    24,
    22,
    21,
    20,
    19,
    19,
    18,
    18,
    19,
    18,
    18,
    18,
    21,
    20,
    18,
    17,
    17,
    17,
    16,
    16,
    15,
    17,
    18,
    17,
    16,
    16,
    18,
    15,
    16,
    17,
    15,
    15,
    14,
    13,
    14,
    17,
    19,
    21,
    21,
    19,
    20,
    23,
    25,
    24,
    26,
    33,
    33,
    36,
    42,
    38,
    39,
    38,
    41,
    44,
    48,
    52,
    48,
    50,
    53,
    60,
    67,
    71,
    70,
    71,
    79,
    82,
    84,
    86,
    91,
    106,
    104,
    101,
    104,
    109,
    108,
    106,
    118,
    113,
    112,
    118,
    112,
    112,
    112,
    102,
    104,
    99,
    101,
    110,
    99,
    110,
    114,
    109,
    114,
    127,
    120,
    119,
    119,
    137,
    143,
    148,
    154,
    165,
    157,
    151,
    157,
    152,
    153,
    160,
    154,
    142,
    144,
    143,
    154,
    148,
    141,
    136,
    129,
    116,
    111,
    110,
    111,
    109,
    106,
    108,
    107,
    107,
    103,
    100,
    100,
    106,
    106,
    108,
    98,
    98,
    98,
    104,
    106,
    104,
    101,
    97,
    99,
    95 ];

var gConst = 12*24;

assert(gDef.data.length == gConst, "在线人数提供的样本不足！");

gDef._getBaseNum = function(){
    var start = 12*16+3;
    var date = new Date();
    var h = date.getHours();
    var m = date.getMinutes();
    var cur = 12*h + Math.floor(m/5);

    var i = cur - start;
    if(i>=0){
        return this.data[i];
    } else {
        return this.data[i+gConst];
    }
}

var random = function(min,max){
    return Math.floor(min+Math.random()*(max-min));
};

gDef.getOnlineNumVirtual = function(){
    var n = this._getBaseNum() + random(-10, 10);
    if(n<0){
        n = 0;
    }
    return n;
}